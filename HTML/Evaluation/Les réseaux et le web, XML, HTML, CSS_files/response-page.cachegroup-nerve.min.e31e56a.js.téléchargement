(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(t,n,r){"use strict";r.d(n,"c",(function(){return f})),r.d(n,"d",(function(){return a})),r.d(n,"b",(function(){return h})),r.d(n,"a",(function(){return j}));var i=r(4),e=r(19),u=r(59),c=r(13),o=Object.freeze({IsKeyField:!1,IsLocalField:!1,IsNumberTypeInDataSource:!1,IsSourceGenerated:!1});function s(t,n){var r=v();if(i.a.isObjectMasterClass(t))r.masterClassGetter=function(){return t};else{if(!(t instanceof Function))throw Error("The parameter of Spec.fromMasterClass should be a master class of a function.");r.masterClassGetter=t}return l(r,n)}function f(t){var n=t;return n&&n.__nerve__&&"Spec"===n.__nerve__.nerveObjectType}function a(t,n){n?Object.keys(n).forEach((function(r){return function t(n,r){r?f(r)?r.__nerve__.isCollection&&t(n+"[0]",r[0]):a(n,r):d(n,"empty field spec")}(t+r,n[r])})):d(t,"there's no spec passed")}function h(t){return f(t)?t.__nerve__.attributes:o}function v(){return{attributes:o,basicTypeName:null,enumTypeGetter:null,isCollection:!1,isLeaf:!1,keyGetter:null,masterClassGetter:null,nullable:!1,nerveObjectType:"Spec"}}function l(t,n){var r={};return b(t,n),Object(u.b)(r,Object(c.e)(t)),r}function b(t,n){if((n=n||{}).IsKeyField){switch(t.basicTypeName){case"boolean":case"string":case"number":break;default:Object(e.b)('"isKeyField" only supported for basic type fields')}n.IsLocalField&&Object(e.b)("a local field can't be key field.")}var r={IsSourceGenerated:!!n.IsSourceGenerated,IsExpandedField:!!n.IsExpandedField,IsKeyField:!!n.IsKeyField,IsLocalField:!!n.IsLocalField,IsNumberTypeInDataSource:!!n.IsNumberTypeInDataSource,SourceFieldName:n.SourceFieldName};t.attributes=Object.freeze(r)}function d(t,n){throw Error("Spec error of "+t+": "+n+".")}function O(t){return function(n,r){return function(t,n,r){var i=v();return i.isLeaf=!0,i.basicTypeName=t,i.keyGetter=r||null,b(i,n),l(i,n)}(t,n,r)}}var j=Object.freeze({create:function(t,n){var r;return b(r=f(t)?Object(c.f)(t.__nerve__):v(),n),Object(c.k)(l(r,n),t)},boolean:O("boolean"),number:O("number"),string:O("string"),enumeration:function(t,n){var r=v();return r.isLeaf=!0,r.basicTypeName="enum",r.enumTypeGetter=t,b(r,n),l(r,n)},reference:O("reference"),collectionOf:function(t,n){var r;r=f(t)?t:i.a.isObjectMasterClass(t)||t instanceof Function?s(t):t;var e=v();e.isCollection=!0;var u=l(e,n);return Object(c.h)(u,0,r),u},fromMasterClass:s})},13:function(t,n,r){"use strict";r.d(n,"h",(function(){return u})),r.d(n,"i",(function(){return c})),r.d(n,"j",(function(){return o})),r.d(n,"k",(function(){return s})),r.d(n,"f",(function(){return f})),r.d(n,"e",(function(){return a})),r.d(n,"n",(function(){return h})),r.d(n,"g",(function(){return v})),r.d(n,"m",(function(){return b})),r.d(n,"l",(function(){return O})),r.d(n,"c",(function(){return m})),r.d(n,"d",(function(){return g})),r.d(n,"a",(function(){return y})),r.d(n,"b",(function(){return p}));var i=r(2),e=r(19);function u(t,n,r,i){void 0===i&&(i=!0),S(t,n,{configurable:!1,enumerable:!!i,value:r,writable:!1})}function c(t,n,r){S(t,n,{configurable:!0,enumerable:!0,get:function(){var i=r();return delete t[n],u(t,n,i),i},set:function(){throw Error("Setting readonly field: "+n)}})}function o(t,n,r,i){S(t,n,{configurable:!1,enumerable:!0,get:r,set:i=i||function(){throw Error("Setting readonly field: "+n)}})}function s(t,n){var r=t;for(var i in n)r[i]=n[i];return r}function f(t){return s({},t)}function a(t){Object(e.a)(!Array.isArray(t),"array is not currently supported by readonly().");var n={};for(var r in t)u(n,r,t[r]);return n}function h(t,n){Object(e.a)(n in t,"the field named "+n+" not been initialized yet."),u(t,n,t[n])}function v(t){return Array.isArray(t)?t:function(t){return t?Array.prototype.slice.apply(t):[]}(t)}var l=$.Deferred().resolve().promise();function b(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(arguments.length){var e=$.Deferred();return e.resolve.apply(e,Object(i.f)([t],n)),e.promise()}return l}var d=$.Deferred().reject().promise();function O(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(arguments.length){var e=$.Deferred();return e.reject.apply(e,Object(i.f)([t],n)),e.promise()}return d}var j=function(){return b()};function m(t){return t.then(j,j)}function g(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=$.Deferred(),i=t.length,e=[];return t.forEach((function(t,n){return t.done((function(t){return r.resolve(t)})).fail((function(t){e[n]=t,0==--i&&r.reject.apply(r,e)}))})),r.promise()}var y=function(){function t(t,n){void 0===n&&(n=0),this.t=t,this.u=n}var n=t.prototype;return n.callOnceLater=function(){var t=this;0!==this.u&&null!=this.o&&this.clear(),null==this.o&&(this.o=window.setTimeout((function(){t.callImmediately()}),this.u))},n.flush=function(){null!=this.o&&(this.clear(),this.t())},n.callImmediately=function(){null!=this.o&&this.clear(),this.t()},n.clear=function(){clearTimeout(this.o),this.o=void 0},t}(),p=function(){function t(t){var n=this,r=$.Deferred();t.then((function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];n.s||r.resolve.apply(r,t)}),(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];n.s||r.reject.apply(r,t)})),this.v=r.promise()}var n=t.prototype;return n.promise=function(){return this.v},n.cancel=function(){this.s=!0},t}();function S(t,n,r){try{Object.defineProperty(t,n,r)}catch(t){var i=t&&t.message||"(no message)";Object(e.b)('Failed to set property "'+n+'": '+i)}}},19:function(t,n,r){"use strict";function i(t,n){t||(console.assert(t,"Nerve - "+n),s("assert failed: "+n))}function e(t){return s("TODO: "+t)}function u(){return s("to be overridden.")}function c(t){if(t="Nerve - warning: "+t,console.warn(t),o){var n=new Error(t).stack;o(n)}}r.d(n,"a",(function(){return i})),r.d(n,"d",(function(){return e})),r.d(n,"c",(function(){return u})),r.d(n,"e",(function(){return c})),r.d(n,"b",(function(){return s}));var o=null;function s(t){throw Error("Nerve - "+t)}},4:function(t,n,r){"use strict";var i=r(2),e=r(19),u=function(){function t(n){n instanceof t?this.O(n.p):this.S(n)}var n=t.prototype;return Object.defineProperty(n,"Count",{get:function(){return this.p.fieldCount},enumerable:!0,configurable:!0}),n.has=function(t){return this.hasId(it(t))},n.hasId=function(t){return!!this.p.map[t]},n.intersect=function(t){if(Array.isArray(t))return t.some(this.has.bind(this));var n=this,r=t;if(r.Count<n.Count){var i=n;n=r,r=i}for(var e in n.p.map)if(r.p.map[e])return!0;return!1},n.intersection=function(n){var r=this;if(Array.isArray(n))return new t(n.filter((function(t){return tt(t)&&r.has(t)})));if(n instanceof t){var i=this,e=n;if(e.Count<i.Count){var u=i;i=e,e=u}var c=new t;for(var o in i.p.map)e.hasId(o)&&c.addFieldSchema(ct(o));return c}return new t},n.toArray=function(){return Object.keys(this.p.map).map(ct)},n.clone=function(){return new t(this)},n.clear=function(){this.S()},n.addFieldSchema=function(t){this.has(t)||(this.I(),this.F(t))},n.addFieldSchemas=function(n){var r,i=this;(r=(r=n instanceof t?n.toArray():n).filter((function(t){return!i.has(t)}))).length&&(this.I(),this.F.bind(this),r.forEach((function(t){return i.F(t)})))},n.removeFieldSchema=function(t){this.has(t)&&(this.I(),this.C(t))},n.removeFieldSchemas=function(n){var r,i=this;(r=(r=n instanceof t?n.toArray():n).filter((function(t){return i.has(t)}))).length&&(this.I(),r.forEach((function(t){return i.C(t)})))},n.I=function(){1!==this.p.referenceCount&&this.S(this.toArray())},n.F=function(t){var n=it(t);this.p.map[n]||(this.p.map[n]=!0,++this.p.fieldCount)},n.C=function(t){var n=it(t);this.p.map[n]&&(delete this.p.map[n],--this.p.fieldCount)},n.S=function(t){this.O({map:{},fieldCount:0,referenceCount:0}),t&&this.addFieldSchemas(t)},n.O=function(t){this.p&&--this.p.referenceCount,this.p=t,++this.p.referenceCount},t}(),c=r(59),o=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(n,t),n.prototype.toJSON=function(){return this.__nerve__.master.getSnapshot()},n}(c.a),s=r(13);function f(t){if(t instanceof o)return t.__nerve__.master;Object(e.b)("Invalid parameter: please use '<your master>.Model.*' for the parameter.")}function a(t){return function(t){if(t instanceof h)return t.constructor;Object(e.b)("the parameter is not a nerve master object.")}(t).__nerve__.masterName}var h=function(t){function n(n){var r=t.call(this)||this,i=r.__nerve__,e=n&&n.Reserved&&n.Reserved.Membership;e&&(i.membership=Object(s.e)(e),Object(s.n)(i,"membership"));var u=!1;return Object(s.j)(i,"deleted",(function(){return u}),(function(t){if(!u&&t){u=!0,i.dirtyChecker.updateDirtiness();var n=i.changeManager;n.startBulkEditMode(),i.markChildrenAsDeleted(),n.markAsDeleted(),n.endBulkEditMode()}})),i.instanceId=(++v).toString(),Object(s.n)(i,"instanceId"),r}Object(i.c)(n,t);var r=n.prototype;return Object.defineProperty(r,"Schema",{get:function(){return Object(e.c)()},enumerable:!0,configurable:!0}),Object.defineProperty(r,"Model",{get:function(){return this.__nerve__.model},set:function(t){this.setData(t,this.Schema.__nerve__.subFields.toArray())},enumerable:!0,configurable:!0}),Object.defineProperty(r,"Parent",{get:function(){var t=this.__nerve__.membership;return t&&t.Parent},enumerable:!0,configurable:!0}),Object.defineProperty(r,"Membership",{get:function(){var t=this.__nerve__.membership;return{Parent:t&&t.Parent,FieldSchema:t&&t.FieldSchema}},enumerable:!0,configurable:!0}),Object.defineProperty(r,"Deleted",{get:function(){return this.__nerve__.deleted},set:function(t){this.__nerve__.deleted=t},enumerable:!0,configurable:!0}),r.getInstanceId=function(){return this.__nerve__.instanceId},r.getSnapshot=function(t){return this.__nerve__.changeManager.getSnapshot(t)},r.bulkEdit=function(t){var n=this.__nerve__.changeManager;n&&n.startBulkEditMode();try{return t(this.Model)}finally{n&&n.endBulkEditMode()}},r.observe=function(t,n){return this.__nerve__.changeManager.observe(t,n)},r.unobserve=function(t,n){return this.__nerve__.changeManager.unobserve(t,n)},r.addRule=function(t){return this.__nerve__.changeManager.addRule(t)},r.removeRule=function(t){return this.__nerve__.changeManager.removeRule(t)},n}(c.a),v=0,l=function(){function t(t){this.M=t,this.$=[],this.D=0,this.N=$.Deferred().resolve(),this.P=new s.a(this.T.bind(this)),this.A=[],this.initializeSnapshot(),this.resetChangeInfo()}var n=t.prototype;return n.getSnapshot=function(t){if(!this.K){for(var n in this.R)this.refreshSubSnapshot(this.R[n]);this.R={},this.K=this.createSnapshotCache()}return this.K},n.definitelyMarkAsChanged=function(t){this.G=!0,this.markAsChanged(t)},n.markAsChanged=function(t,n){this.U();var r=t.FieldSchema,i=new u([r]);if(this.L.addFieldSchema(r),n){this.V.push(n);var e=n.FieldSchemas.map(r.__nerve__.shadowMapper);i.addFieldSchemas(e)}this.markFieldsAsChanged(i)},n.markAsDeleted=function(){this.markFieldsAsChanged([this.M.Schema])},n.startBulkEditMode=function(){++this.D},n.endBulkEditMode=function(){--this.D<=0&&(this.D=0,this.P.flush())},n.observe=function(t,n){var r=this.$[this._(t)];r?n?r.fieldSet.addFieldSchemas(n):r.fieldSet=this.B().clone():this.$.push({callback:t,fieldSet:new u(n||this.B())})},n.unobserve=function(t,n){var r=this._(t),i=this.$[r];i&&(n?n.forEach((function(t){i.fieldSet.removeFieldSchemas(t.__nerve__.allContainedFields)})):i.fieldSet.clear(),0===i.fieldSet.Count&&this.$.splice(r,1))},n.addRule=function(t){this.A.indexOf(t)<0&&this.A.push(t)},n.removeRule=function(t){var n=this.A.indexOf(t);n>=0&&this.A.splice(n,1)},n.markSubSnapshotAsDirty=function(t){var n=this;if(t.length){this.K=void 0,t.forEach((function(t){return n.R[t.Name]=t}));var r=this.Master.__nerve__.membership,i=r&&r.Parent.__nerve__.changeManager;i&&i.markSubSnapshotAsDirty([r.Property])}},n.getChangingPeriod=function(){return this.N.promise()},Object.defineProperty(n,"Master",{get:function(){return this.M},enumerable:!0,configurable:!0}),n.createChange=function(t){var n=this.Master.__nerve__.deleted&&!this.J;return{BeingDeleted:n,DefinitelyMarked:this.G,FieldSchemas:Object.freeze(t.toArray()),Master:this.Master,NewValues:n?null:this.getSnapshot(),OldValues:this.W,SubChanges:Object.freeze(this.V),UpdateNeeded:n}},n.resetChangeInfo=function(){this.L=new u,this.V=[],this.W=this.getSnapshot(),this.J=this.M.Deleted,this.G=!1},n.notifyChangeIfNeed=function(){this.D>0?this.P.callOnceLater():this.P.callImmediately()},n.anythingChanged=function(){return this.L.Count>0||this.Master.__nerve__.deleted},n.markFieldsAsChanged=function(t){this.L.addFieldSchemas(t),this.q?this.H=!0:this.notifyChangeIfNeed()},n.shouldObserverBeNotified=function(t,n){return t.fieldSet.intersect(n.FieldSchemas)},n.removeUnchangedFields=function(t,n){},n._=function(t){for(var n=0;n<this.$.length;++n)if(this.$[n].callback===t)return n},n.T=function(){var t=this;if(this.X(),this.Y(),this.G||this.Master.Deleted||this.removeUnchangedFields(this.L,this.W),this.anythingChanged()){var n=Object.freeze(this.createChange(this.L));this.resetChangeInfo();var r=this.Master.__nerve__.membership;if(r&&r.Property.Mounted){var i=r.Parent.__nerve__.changeManager;i&&i.markAsChanged(r.Property,n)}this.$.concat().forEach((function(r){t.shouldObserverBeNotified(r,n)&&r.callback(n)}))}},n.X=function(){var t=this;this.q=!0;var n=0,r=this.L,i=this.V,e=[],c=function(){var c=o.A.filter((function(n){return!n.InterestedFields||t.L.intersect(n.InterestedFields)}));if(!c.length)return"break";if(++n>8*o.A.length)return o.Z(e),"break";var s=o.L,f=o.V;o.L=new u,o.V=[];var a=o.Master.__nerve__.deleted&&!o.J;c.forEach((function(n){t.H=!1,n.onChange({Master:t.Master,BeingDeleted:a,FieldSchemas:s.toArray(),OldValues:t.W,SubChanges:f}),t.H&&e.push(n)})),r.addFieldSchemas(o.L),i.push.apply(i,o.V)},o=this;do{if("break"===c())break}while(this.L.Count);this.q=!1,this.L=r,this.V=i},n.Z=function(t){Object(e.e)("following rules might do against each other: "+JSON.stringify(t.map((function(t){return t.Name})))+" (master: "+a(this.Master)+")")},n.B=function(){return this.Master.Schema.__nerve__.allContainedFields},n.U=function(){"pending"!==this.N.state()&&(this.N=$.Deferred())},n.Y=function(){this.N.resolve()},t}(),b=function(){function t(t,n,r){var i=this;this.tt=t,this.nt=n;var e=r.Reserved.Membership;this.rt=e.Parent,e.Property=this,this.it=!1,r.Reserved.Mounted.done((function(){return i.it=!0}))}var n=t.prototype;return Object.defineProperty(n,"Name",{get:function(){return this.tt},enumerable:!0,configurable:!0}),Object.defineProperty(n,"FieldSchema",{get:function(){return this.nt},enumerable:!0,configurable:!0}),Object.defineProperty(n,"ParentMaster",{get:function(){return this.rt},enumerable:!0,configurable:!0}),Object.defineProperty(n,"Index",{get:function(){return this.et},set:function(t){if(t!==this.et){var n=this.et;this.et=t;var r=this.ParentMaster;this.indexDirtinessUpdateNeeded()&&r.__nerve__.dirtyChecker.updateDirtinessForIndexChange(this),this.Mounted&&r.__nerve__.changeManager.onPropertyIndexChange(this,n)}},enumerable:!0,configurable:!0}),Object.defineProperty(n,"Mounted",{get:function(){return this.it},enumerable:!0,configurable:!0}),Object.defineProperty(n,"Deleted",{get:function(){return this.ut},enumerable:!0,configurable:!0}),Object.defineProperty(n,"ParentDirtyChecker",{get:function(){return this.ParentMaster.__nerve__.dirtyChecker},enumerable:!0,configurable:!0}),n.markAsDeleted=function(t){this.ut=!0,this.Index=void 0},n.getKey=function(){return this.nt.__nerve__.getKey(this.getter())},t}(),d=function(){function t(t){this.ct=t}return t.prototype.updateDirtiness=function(){if(this.ct){var t=this.getProperty();t.ParentMaster.__nerve__.dirtyChecker.setMemberDirtiness(t.Name,this.isDirty())}},t}(),O=function(t){function n(n,r){var i=t.call(this,r)||this;return i.ot=n,i}Object(i.c)(n,t);var r=n.prototype;return r.isDirty=function(){return this.st!==this.convertModelToSourceData()},r.initializeSourceData=function(t){this.setSourceData(t)},r.getDelta=function(){return this.convertModelToSourceData()},r.getSnapshotToUpdate=function(){return this.convertModelToSourceData()},r.getSourceData=function(){return this.st},r.setSourceData=function(t){void 0===t&&(t=null),this.st=t,this.updateDirtiness()},r.onSourceDataReceived=function(t){var n=this.isDirty();this.setSourceData(t),n||this.ot.setter(this.convertFromSourceData(t))},r.getProperty=function(){return this.ot},r.convertModelToSourceData=function(){return this.ot.getter()},r.convertFromSourceData=function(t){return t},n}(d),j=function(t){function n(n,r,i){var e=t.call(this,n,r,i)||this;e.ft=e.normalizeValue(i.InitialData);var u=!r.__nerve__.info.Attributes.IsLocalField;return e.at=e.createDirtyChecker(u),e}Object(i.c)(n,t);var r=n.prototype;return r.getter=function(){return this.ft},r.setter=function(t){if(t=this.normalizeValue(t),this.ft!==t){this.ft=t,this.at.updateDirtiness();var n=this.ParentMaster.__nerve__.changeManager;n.markSubSnapshotAsDirty([this]),n.markAsChanged(this)}},r.getDirtyChecker=function(){return this.at},r.normalizeValue=function(t){return null==t?null:t},r.createDirtyChecker=function(t){return new O(this,t)},r.indexDirtinessUpdateNeeded=function(){return!0},n}(b),m=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(i.c)(n,t);var r=n.prototype;return r.convertModelToSourceData=function(){return this.ht(this.getProperty().getter())},r.convertFromSourceData=function(t){return this.ht(t)},r.ht=function(t){return null==t?null:this.getProperty().FieldSchema.__nerve__.enumType[t]},n}(O),g=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(i.c)(n,t);var r=n.prototype;return r.normalizeValue=function(t){var n=typeof t;if("string"===n||"number"===n){var r=this.FieldSchema.__nerve__.enumType;if(t in r)return"string"===n?r[t]:t}return null},r.createDirtyChecker=function(t){return new m(this,t)},n}(j),y=r(1);function p(t){return t.__nerve__.info.IsLeaf}function S(t,n,r,i,e){var u=ht({enumTypeGetter:r.__nerve__.enumTypeGetter,getKeyForReferenceType:r.__nerve__.keyGetter,info:{Attributes:Object(y.b)(r),FieldId:t,IsLeaf:!0,IsCollection:!1,Name:i,Path:e||i},parentMasterClass:n,parentSchema:n.__nerve__.schema,withDataSource:!1});return u.__nerve__.generateProperty=function(t){return t.__nerve__.asEnum?function(n,r){return new g(n,t,r)}:function(n,r){return new j(n,t,r)}}(u),Object(s.n)(u.__nerve__,"generateProperty"),u}var w=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(i.c)(n,t);var r=n.prototype;return r.markAsChanged=function(n,r){r&&r.BeingDeleted?this.Master.deleteItems([n.getter()]):t.prototype.markAsChanged.call(this,n,r)},r.onPropertiesAdded=function(t){t.length&&(this.vt=this.vt.concat(t),this.lt=void 0,this.markSubSnapshotAsDirty(t),this.markFieldsAsChanged(this.Master.Schema.__nerve__.allContainedFields))},r.onPropertiesRemoved=function(t){var n=this;t.length&&(t.forEach((function(t){var r=n.vt.indexOf(t);r>=0?n.vt.splice(r,1):n.bt.push(t),n.dt[t.Name]&&(delete n.dt[t.Name],--n.Ot)})),this.lt=void 0,this.markSubSnapshotAsDirty(t),this.markFieldsAsChanged(this.Master.Schema.__nerve__.allContainedFields))},r.onPropertyIndexChange=function(t,n){this.markSubSnapshotAsDirty([t]),this.dt[t.Name]?this.dt[t.Name].NewIndex=t.Index:(this.dt[t.Name]={OldIndex:n,NewIndex:t.Index},++this.Ot),this.notifyChangeIfNeed()},r.initializeSnapshot=function(){p(this.Master.Schema[0])?this.jt=n.getSubSnapshotForLeafContent:this.jt=n.getSubSnapshotForMasterContent,this.gt()},r.refreshSubSnapshot=function(t){this.lt&&!t.Deleted&&(this.lt[t.Index]=this.jt(t.getter()))},r.createSnapshotCache=function(){return this.lt||this.gt(),this.lt.concat()},r.createChange=function(n){var r=this,i=t.prototype.createChange.call(this,n),e=function(t){return t.getter()},u=function(t){return r.jt(t)};i.AddedModels=Object.freeze(this.vt.map(e)),i.AddedItemsAsSnapshots=Object.freeze(i.AddedModels.map(u)),i.RemovedModels=Object.freeze(this.bt.map(e)),i.RemovedItemsAsSnapshots=Object.freeze(i.RemovedModels.map(u));var c={};Object.keys(this.dt).forEach((function(t){var n=r.dt[t];null!=n.NewIndex&&null!=n.OldIndex&&(c[n.NewIndex]=n.OldIndex)})),i.ChangedIndexMap=Object.freeze(c);var o=this.Master.Schema[0];return i.UpdateNeeded||o.__nerve__.info.Attributes.IsLocalField||(i.UpdateNeeded=i.AddedModels.length>0||i.RemovedModels.length>0||i.SubChanges.some((function(t){return t.UpdateNeeded}))),i},r.resetChangeInfo=function(){t.prototype.resetChangeInfo.call(this),this.vt=[],this.bt=[],this.dt={},this.Ot=0},r.anythingChanged=function(){return this.vt.length>0||this.bt.length>0||this.Ot>0||t.prototype.anythingChanged.call(this)},r.shouldObserverBeNotified=function(n,r){return!!Object.keys(r.ChangedIndexMap).length||t.prototype.shouldObserverBeNotified.call(this,n,r)},r.gt=function(){this.lt=[];for(var t=this.Master.Model,n=0;n<t.length;++n)this.lt[n]=this.jt(t[n])},n.getSubSnapshotForLeafContent=function(t){return t},n.getSubSnapshotForMasterContent=function(t){return f(t).getSnapshot()},n}(l),I=function(t){function n(n,r,i){var e=t.call(this,i)||this;return e.yt={},e.pt=0,e.M=n,e.St=r,e}Object(i.c)(n,t);var r=n.prototype;return Object.defineProperty(r,"Master",{get:function(){return this.M},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ExistingInSource",{get:function(){return this.St},set:function(t){this.St=t,this.updateDirtiness()},enumerable:!0,configurable:!0}),r.isDirty=function(){if(this.M.__nerve__.deleted){var t=this.Master.Parent;return!(t&&t.__nerve__.deleted)&&this.St}return 0!==this.pt},r.setMemberDirtiness=function(t,n){!this.yt[t]!=!n&&(n?(this.yt[t]=!0,0==this.pt++&&this.updateDirtiness()):(delete this.yt[t],0==--this.pt&&this.updateDirtiness()))},r.getDirtyKeys=function(){return Object.keys(this.yt)},r.getProperty=function(){return this.M.__nerve__.membership.Property},n}(d),F=function(t){function n(n,r,i){var e=t.call(this,n,r,i)||this;return e.wt([]),e}Object(i.c)(n,t);var r=n.prototype;return r.initializeSourceData=function(t){var n=this;this.wt(t||[]),this.It().forEach((function(t){var r=t.getDirtyChecker(),i=n.st[n.Ft(t)];r.initializeSourceData(i)})),this.updateDirtinessForLength(this.Master.Model.length)},r.getDelta=function(){return Object(e.d)("get delta for collection is not supported yet.")},r.getSnapshotToUpdate=function(){return this.It().map((function(t){return t.getDirtyChecker()})).map((function(t){return t.getSnapshotToUpdate()}))},r.getSourceData=function(){return ft(this.st,this.Master.Schema)},r.setSourceData=function(t){this.setSourceDataInternal(t||[])},r.onSourceDataReceived=function(t){t=t||[],this.wt(t),this.Master.Model.__nerve__.onSourceDataReceived(t),this.updateDirtinessForLength(this.Master.Model.length)},r.updateDirtinessForLength=function(t){this.setMemberDirtiness("length",t!==this.getSourceDataLength())},r.updateDirtinessForIndexChange=function(t){t.Deleted?this.setMemberDirtiness(t.Name,!1):t.getDirtyChecker().setSourceData(this.st[t.Index])},r.getSourceDataLength=function(){return this.st.length},r.setSourceDataInternal=function(t){var n=this;this.wt(t),this.It().forEach((function(t){var r=t.getDirtyChecker(),i=n.Ft(t);r.setSourceData(n.st[i]),r instanceof I&&(r.ExistingInSource=i<n.st.length)})),this.updateDirtinessForLength(this.Master.Model.length)},r.It=function(){return this.Master.Model.__nerve__.properties},r.wt=function(t){var n=this;this.st=t;var r=this.Master.Schema[0];r.__nerve__.withKey&&(this.Ct={},t.map(r.__nerve__.getKeyFromSourceData).forEach((function(t,r){t&&(n.Ct[t]=r)})))},r.Ft=function(t){return this.Master.Schema[0].__nerve__.withKey?this.Ct[t.getKey()]:t.Index},n}(I),C=function(t){function n(n,r){var i,e,u=this,c=n.Schema[0];c.__nerve__.withKey?(i=E,e=R):(i=c.__nerve__.info.IsLeaf?A:K,e=G);var o=r.Reserved&&r.Reserved.ParentExistingInDataSource;return u=t.call(this,{master:n,keyToProperty:c.__nerve__.withKey?{}:null,initializedLength:0,newestPropertyName:0,masterTreeReady:r.MasterTreeReady,properties:[],addItems:function(t,n){return M(u,t,n,o)},deleteItems:function(t,n){return function(t,n,r){var i=t.__nerve__.properties.filter((function(t){var r=t.getter();return n.some((function(t){return t===r}))}));return P(t,i,r),i}(u,t,n)},setData:function(t){return i(u,t)},onSourceDataReceived:function(t){return e(u,t)},setComparer:function(t){u.__nerve__.comparer=t,u.__nerve__.propertyComparer=t&&function(n,r){return t(n.getter(),r.getter())},t&&k(u,u.__nerve__.propertyComparer)}})||this,M(u,Object(s.g)(r.InitialData),r.ExistingInDataSource,o),u}Object(i.c)(n,t);var r=n.prototype;return Object.defineProperty(r,"length",{get:function(){return this.__nerve__.properties.length},enumerable:!0,configurable:!0}),n}(o);function M(t,n,r,i){var e=t.__nerve__.master,u=e.Schema[0],c=u.__nerve__.generateProperty,o=$.Deferred(),s=$.when(t.__nerve__.masterTreeReady,o.promise()),f=n.map((function(n){return c((++t.__nerve__.newestPropertyName).toString(),{InitialData:n,ExistingInDataSource:r,MasterTreeReady:s,Reserved:{Membership:{Parent:e,FieldSchema:u},ParentExistingInDataSource:i,Mounted:o}})}));if(u.__nerve__.withKey){var a=t.__nerve__.keyToProperty;if(u.__nerve__.withDataSource){var h=u.__nerve__.keyFields.toArray();f.forEach((function(t){t.Master.Synchronizer.ensureFieldsReady(h).done((function(){return D(a,t)}))}))}else f.forEach((function(t){return D(a,t)}))}var v=t.__nerve__.properties,l=v.length;return e.bulkEdit((function(){v.push.apply(v,f),function(t){var n=t.__nerve__,r=n.properties.length;for(;n.initializedLength<r;)N(t,n.initializedLength),++n.initializedLength}(t);for(var n=l;n<v.length;++n)v[n].Index=n;e.__nerve__.dirtyChecker.updateDirtinessForLength(v.length);var r=t.__nerve__.propertyComparer;r&&k(t,r),o.resolve();var i=e.__nerve__.changeManager;i&&i.onPropertiesAdded(f)})),f}function D(t,n){var r=n.getKey();r in t&&Object(e.b)('duplicated key "'+r+'" at '+ut(n.FieldSchema)+" is being added."),t[r]=n}function N(t,n){Object(s.j)(t,n,(function(){return this.__nerve__.properties[n].getter()}),(function(t){this.__nerve__.properties[n].setter(t)}))}function P(t,n,r){var i=n.length;if(i>0){var e=t.__nerve__.properties,u=e.length,c=t.__nerve__.master;c.bulkEdit((function(){for(;i>0;--i){for(var o=n[i-1];--u>o.Index;)e[u].Index-=i;e.splice(u,1),o.markAsDeleted(r)}var s=c.Schema[0];if(s.__nerve__.withKey){var f=t.__nerve__.keyToProperty;if(s.__nerve__.withDataSource){var a=s.__nerve__.keyFields.toArray();n.forEach((function(t){t.Master.Synchronizer.ensureFieldsReady(a).done((function(){return T(f,t)}))}))}else n.forEach((function(t){return T(f,t)}))}c.__nerve__.dirtyChecker.updateDirtinessForLength(e.length),c.__nerve__.changeManager.onPropertiesRemoved(n)}))}}function T(t,n){var r=n.getKey();n===t[r]&&delete t[r]}function k(t,n){n&&t.__nerve__.properties.sort(n),t.__nerve__.master.bulkEdit((function(){t.__nerve__.properties.forEach((function(t,n){t.Index=n}))}))}function E(t,n){var r=t.__nerve__.master,i=t.__nerve__.master.Schema[0],e=t.__nerve__.properties,u={};n.map(i.__nerve__.getKey).forEach((function(t,n){return u[t]=n}));var c={};e.forEach((function(t){return c[t.getKey()]=t}));var o={};r.bulkEdit((function(){var r=[];for(var i in u){var e=u[i];if(i in c){var s=c[i];s.setter(n[e]),o[s.Name]=e,delete c[i]}else r.push(e)}var f=[];for(var i in c)f.push(c[i]);f.length&&(f.sort((function(t,n){return t.Index-n.Index})),P(t,f,!1)),r.length&&t.__nerve__.addItems(r.map((function(t){return n[t]})),!1).forEach((function(t,n){return o[t.Name]=r[n]}));var a=function(t,n){return o[t.Name]-o[n.Name]},h=t.__nerve__.propertyComparer;k(t,h?function(t,n){return h(t,n)||a(t,n)}:a)}))}function A(t,n){for(var r=t.__nerve__.master,i={},u=Object(s.g)(t.__nerve__.master.getSnapshot()).slice(),c=[],o={},f=0;f<n.length;++f){var a=n[f],h=u.indexOf(a);h<0?c.push(a):(o[f]=h,u[h]=i)}var v=t.__nerve__.properties,l=[];for(f=0;f<u.length;++f)u[f]!==i&&l.push(v[f]);var b=v.slice();r.bulkEdit((function(){var r=t.__nerve__.addItems(c,!1);l.length&&(l.sort((function(t,n){return t.Index-n.Index})),P(t,l,!1)),Object(e.a)(n.length===v.length,"All items should be updated into properties.");for(var i=0,u=0;u<n.length;++u)null==o[u]?v[u]=r[i++]:v[u]=b[o[u]];k(t,t.__nerve__.propertyComparer)}))}function K(t,n){t.__nerve__.master.bulkEdit((function(){for(var r=t.length,i=Math.min(r,n.length),e=t.__nerve__.properties,u=0;u<i;++u)e[u].setter(n[u]);if(r<n.length)t.__nerve__.addItems(n.slice(t.length),!1);else if(r>n.length){var c=t.__nerve__.properties.slice(n.length);P(t,c,!1)}}))}function R(t,n){var r=t.__nerve__.master;r.bulkEdit((function(){var i,e=r.Schema[0].__nerve__,u=t.__nerve__.keyToProperty,c={},o=[];n.map(e.getKeyFromSourceData).forEach((function(t,r){c[t]=r,t in u?u[t].getDirtyChecker().onSourceDataReceived(n[r]):o.push(n[r])})),i=e.withDataSource?function(t){return"resolved"===t.Master.Synchronizer.existingInDataSource().state()&&!(t.getKey()in c)}:function(t){return!(t.getKey()in c)};var s=t.__nerve__.properties.filter(i);P(t,s,!0);var f=ot(o,r.Schema);t.__nerve__.addItems(f,!0);var a=t.__nerve__.propertyComparer;a||(a=function(t,n){return c[t.getKey()]-c[n.getKey()]}),k(t,a)}))}function G(t,n){var r=t.__nerve__.master;r.bulkEdit((function(){for(var i=t.length,e=Math.min(i,n.length),u=t.__nerve__.properties,c=0;c<e;++c)u[c].getDirtyChecker().onSourceDataReceived(n[c]);if(i<n.length){var o=ot(n.slice(i),r.Schema);t.__nerve__.addItems(o,!0)}else if(i>n.length){var s=t.__nerve__.properties.slice(n.length);P(t,s,!0)}}))}var U=function(t){function n(n){var r;n=n||{};var i=r=t.call(this,n)||this,e=r.__nerve__;e.markChildrenAsDeleted=function(){var t;p((t=i).Schema[0])||Object(s.g)(t.Model).map(f).forEach((function(t){return t.Deleted=!0}))},Object(s.n)(e,"markChildrenAsDeleted");var u=r.Schema.__nerve__,c=!u.withDataSource&&!u.info.Attributes.IsLocalField;return e.dirtyChecker=new F(i,n.ExistingInDataSource,c),Object(s.n)(e,"dirtyChecker"),e.model=new C(i,n),Object(s.n)(e,"model"),e.changeManager=new w(i),Object(s.n)(e,"changeManager"),r}Object(i.c)(n,t);var r=n.prototype;return r.addItems=function(t){return this.Model.__nerve__.addItems(t,!1).map((function(t){return t.getter()}))},r.deleteItems=function(t){return this.Model.__nerve__.deleteItems(t,!1).map((function(t){return t.getter()}))},r.itemsAddedInSource=function(t){return this.Model.__nerve__.addItems(t,!0).map((function(t){return t.getter()}))},r.itemsDeletedInSource=function(t){return this.Model.__nerve__.deleteItems(t,!0).map((function(t){return t.getter()}))},r.getItemWithKeyFields=function(t){var n=this.Schema[0].__nerve__.getKey(t),r=this.Model.__nerve__.keyToProperty[n];return r&&r.getter()},r.getIndexWithKeyFields=function(t){var n=this.Schema[0].__nerve__.getKey(t),r=this.Model.__nerve__.keyToProperty[n];return r?r.Index:-1},r.markAsChanged=function(t){var n=this.Model.__nerve__.properties[t];n&&this.__nerve__.changeManager.definitelyMarkAsChanged(n)},r.setComparer=function(t){this.Model.__nerve__.setComparer(t)},r.setData=function(t){this.Model.__nerve__.setData(Object(s.g)(t))},n}(h);var x=function(t){function n(n,r,i){var e=t.call(this,n,r,i)||this,u=r.__nerve__.subMasterClassGetter();return e.M=new u(i),e}Object(i.c)(n,t);var r=n.prototype;return Object.defineProperty(r,"Master",{get:function(){return this.M},enumerable:!0,configurable:!0}),r.getter=function(){return this.M.Model},r.setter=function(t){this.M.setData(t,this.M.Schema.__nerve__.subFields.toArray())},r.markAsDeleted=function(n){t.prototype.markAsDeleted.call(this,n),n&&(this.getDirtyChecker().ExistingInSource=!1),this.M.Deleted=!0},r.getDirtyChecker=function(){return this.M.__nerve__.dirtyChecker},r.indexDirtinessUpdateNeeded=function(){return!this.FieldSchema.__nerve__.withDataSource},n}(b);function L(t){return t.__nerve__.info.IsCollection}function z(t,n,r,i,u,c){var o=r.Schema,f=o.__nerve__,a=ht({enumTypeGetter:f.enumTypeGetter,getKeyForReferenceType:f.getKeyForReferenceType,info:{Attributes:c,FieldId:t,IsCollection:f.info.IsCollection,IsLeaf:f.info.IsLeaf,Name:i,Path:u||i},parentMasterClass:n,parentSchema:n.__nerve__.schema,shadowParent:o,shadowRoot:o,subMasterClassGetter:function(){return r},withDataSource:f.withDataSource}),h={};return h[it(r.__nerve__.schema)]=a,a.__nerve__.generateProperty=function(t){return function(n,r){return new x(n,t,r)}}(a),Object(s.n)(a.__nerve__,"generateProperty"),a.__nerve__.shadowMapper=function(t,n){return function r(i){var u=it(i),c=n[u];if(!c){var o=i.__nerve__.parentSchema;c=(tt(o)?r(o):t)[et(i)],Object(e.a)(c===n[u],"the new shadow should be added into the shadow map.")}return c}}(a,h),Object(s.n)(a.__nerve__,"shadowMapper"),Q(a,r.Schema,h),a}function Q(t,n,r){Object.keys(n).forEach((function(i){Object(s.i)(t,i,function(t,n,r,i){return function(){var e=n[r],u=e.__nerve__,c=ht({enumTypeGetter:u.enumTypeGetter,getKeyForReferenceType:u.getKeyForReferenceType,info:{Attributes:u.info.Attributes,FieldId:lt(),IsCollection:u.info.IsCollection,IsLeaf:u.info.IsLeaf,Name:r,Path:vt(t.__nerve__.info.Path,r)},parentSchema:t,parentMasterClass:t.__nerve__.parentMasterClass,shadowParent:e,shadowRoot:u.shadowRoot,subMasterClassGetter:u.subMasterClassGetter,withDataSource:u.withDataSource});return i[it(e)]=c,Q(c,e,i),c}}(t,n,i,r))}))}var V={ObjectSynchronizer:void 0},_=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(i.c)(n,t);var r=n.prototype;return r.getSnapshot=function(n){var r=t.prototype.getSnapshot.call(this,n);if(!n)return r;var i={};return this.Master.Schema.__nerve__.subFields.intersection(n).toArray().map(et).forEach((function(t){return i[t]=r[t]})),i},r.initializeSnapshot=function(){var t=this;this.lt={};var n=this.Master,r=n.Schema.__nerve__.subFields.toArray();if(W(n)){var i=n;r=r.filter((function(t){return i.isFieldReady(t)}))}r.forEach((function(n){return t.Mt(n)}))},r.refreshSubSnapshot=function(t){this.Mt(t.FieldSchema)},r.createSnapshotCache=function(){return Object.freeze(Object(s.f)(this.lt))},r.createChange=function(n){var r=t.prototype.createChange.call(this,n);return r.UpdateNeeded||(r.UpdateNeeded=n.toArray().some((function(t){return t.__nerve__.info.IsLeaf&&!t.__nerve__.info.Attributes.IsLocalField}))),r.UpdateNeeded||(r.UpdateNeeded=r.SubChanges.filter((function(t){return t.UpdateNeeded})).some((function(t){var r=t.Master.Membership.FieldSchema;return n.has(r)&&!r.__nerve__.info.Attributes.IsLocalField}))),r},r.removeUnchangedFields=function(t,n){var r=this,i=this.Master.Schema,e=t.toArray().filter((function(t){if(t.__nerve__.parentSchema===i&&p(t)){var e=et(t);return r.Master.Model[e]===n[e]}return!1}));t.removeFieldSchemas(e)},r.Mt=function(t){var n=et(t),r=this.Master.Model[n];if(p(t))this.lt[n]=r;else{var i=f(r);this.lt[n]=i.getSnapshot()}},n}(l),B=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(i.c)(n,t);var r=n.prototype;return r.initializeSourceData=function(t){t=this.$t(t);var n=this.Master.Schema,r=this.Master.Model.__nerve__.properties;for(var i in r){var e=n[i].__nerve__.sourceName;r[i].getDirtyChecker().initializeSourceData(t[e])}},r.getDelta=function(){var t=this;if(this.isDirty()){var n=this.Master.Schema,r={};return this.getDirtyKeys().sort().forEach((function(i){var e=n[i].__nerve__.sourceName;r[e]=t.Dt(i).getSnapshotToUpdate()})),r}},r.getSnapshotToUpdate=function(){var t={},n=this.Master.Schema,r=this.Nt();for(var i in r){t[n[i].__nerve__.sourceName]=r[i].getSnapshotToUpdate()}return t},r.getSourceData=function(){var t={},n=this.Master.Schema,r=this.Nt();for(var i in r){t[n[i].__nerve__.sourceName]=r[i].getSourceData()}return t},r.setSourceData=function(t){var n=this;t=this.$t(t),Object.keys(t).forEach((function(r){n.Pt(r).setSourceData(t[r])}))},r.onSourceDataReceived=function(t){var n,r=this;t=this.$t(t);var i=this.Master;if(W(i)){n=$.Deferred();var e=this.Master.Schema.__nerve__.sourceNameToClientName,u=Object.keys(t).map((function(t){return e[t]})).filter((function(t){return t}));i.Synchronizer.markFieldsAsReady(u,n.promise())}i.bulkEdit((function(){Object.keys(t).forEach((function(n){r.Pt(n).onSourceDataReceived(t[n])}))})),n&&n.resolve()},r.$t=function(t){var n=this.Master.Schema.__nerve__.sourceNameToClientName,r={};return t?Object.keys(t).filter((function(t){return t in n})).forEach((function(n){return r[n]=t[n]})):Object.keys(n).forEach((function(t){return r[t]=null})),r},r.Nt=function(){var t=this.Master.Model.__nerve__.properties,n={};return this.Master.Schema.__nerve__.subFields.toArray().filter((function(t){return!t.__nerve__.info.Attributes.IsLocalField})).map(et).forEach((function(r){return n[r]=t[r].getDirtyChecker()})),n},r.Dt=function(t){return this.Master.Model.__nerve__.properties[t].getDirtyChecker()},r.Pt=function(t){var n=this.Master.Schema.__nerve__.sourceNameToClientName[t];return this.Dt(n)},n}(I),J=function(t){function n(n,r,i,u,c,o){var f,a={};f=t.call(this,{master:n,properties:a})||this;var h=function(t){return W(t)?function(n,r){var i=function(){if(!t.isFieldReady(r)){var n=ut(r);Object(e.b)("The field ("+n+") not ready yet.")}};return{getter:function(){return i(),n.getter()},setter:function(t){i(),n.setter(t)}}}:function(t,n){return{getter:function(){return t.getter()},setter:function(n){return t.setter(n)}}}}(n);return Object.keys(n.Schema).forEach((function(t){var e=n.Schema[t],v=e.__nerve__.generateProperty(t,{InitialData:r[t],ExistingInDataSource:i,MasterTreeReady:c,Reserved:{Membership:{FieldSchema:e,Parent:n},ParentExistingInDataSource:o,Mounted:u}});a[t]=v;var l=h(v,e);Object(s.j)(f,t,l.getter,l.setter)})),f}return Object(i.c)(n,t),n}(o);function W(t){return t instanceof X}function q(t,n,r){Object(y.d)(t,n);var e=function(t){function n(n,i){return t.call(this,n,i,r)||this}Object(i.c)(n,t);var e=n.prototype;return Object.defineProperty(n,"Schema",{get:function(){return n.__nerve__.schema},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Schema",{get:function(){return n.__nerve__.schema},enumerable:!0,configurable:!0}),n}(r?X:H);return Object(c.b)(e,Object(s.e)({nerveObjectType:"object master",masterName:t,dataSourceFactory:r}),!0),e.__nerve__.schema=at(e,n),Object(s.n)(e.__nerve__,"schema"),e}var H=function(t){function n(n,r,i){var e;n=n||{},r=r||{};var u=(e=t.call(this,n)||this).__nerve__;u.markChildrenAsDeleted=function(){var t;(t=e).Schema.__nerve__.subFields.toArray().filter((function(t){return!p(t)})).map(et).map((function(n){return t.Model.__nerve__.properties[n]})).map((function(t){return t.Master})).forEach((function(t){return t.Deleted=!0}))},Object(s.n)(u,"markChildrenAsDeleted");var c,o=$.Deferred(),f=$.when(r.MasterReady,o.promise()),a=!i&&u.membership&&!u.membership.FieldSchema.__nerve__.info.Attributes.IsLocalField;if(u.dirtyChecker=new B(e,n.ExistingInDataSource,a),Object(s.n)(u,"dirtyChecker"),i?(u.synchronizer=new V.ObjectSynchronizer(e,n,r,f,i),c=u.synchronizer.existingInDataSource()):(u.synchronizer=null,c=n.Reserved&&n.Reserved.ParentExistingInDataSource),Object(s.n)(u,"synchronizer"),u.model=new J(e,n.InitialData||{},n.ExistingInDataSource,f,$.when(n.MasterTreeReady,f),c),Object(s.n)(u,"model"),u.changeManager=new _(e),Object(s.n)(u,"changeManager"),i){var h=st(n.ExistingInDataSource?n.InitialData:null,e.Schema);u.dirtyChecker.initializeSourceData(h)}return o.resolve(),e}Object(i.c)(n,t);var r=n.prototype;return r.setData=function(t,n){var r=this.Model;if(t!==r){var i;if(t=t||{},n)i=Y(this,n);else{var u=this.Schema;i=Object.keys(t).map((function(t){return u[t]})).filter((function(t){return t}))}var c=[];this.bulkEdit((function(){i.map(et).forEach((function(n){n in r?r[n]=t[n]:c.push(n)}))})),c.length&&Object(e.e)("following field(s) not found in "+a(this)+": "+c)}},r.getModelByFieldSchema=function(t){var n=t;nt(n),n=Z(this,n);for(var r=this.Schema,i=[];n!==r;){if(i.push(n),n.__nerve__.info.IsCollection)throw Error("unable to get model/value from collection "+ut(n)+".");n=n.__nerve__.parentSchema}var e=this.Model;do{e=e[et(n=i.pop())]}while(i.length);return e},n}(h),X=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(i.c)(n,t);var r=n.prototype;return Object.defineProperty(r,"Synchronizer",{get:function(){return this.__nerve__.synchronizer},enumerable:!0,configurable:!0}),r.isFieldReady=function(t){return this.Synchronizer.isFieldReady(t)},r.ensureFieldsReady=function(t){return this.Synchronizer.ensureFieldsReady(t)},r.fieldsReady=function(t){return this.Synchronizer.fieldsReady(t)},r.getRelatedSourceFields=function(t){return t},r.forceFieldsReady=function(t){return this.Synchronizer.forceFieldsReady(t)},n}(H);function Y(t,n){return n.map((function(n){var r=t.Schema;if("string"==typeof n){var i=r[n];if(tt(i))return i}else if(tt(n))return Z(t,n);Object(e.b)("field "+n+" doesn't exist in master "+a(t))}))}function Z(t,n){for(var r=t.Schema,i=[];n.__nerve__.shadowRoot!==r;){var u=et(n);i.push(u),(n=n.__nerve__.parentSchema)||Object(e.b)("field schema ("+ut(n)+") is not a member schema of master ("+a(t)+")")}for(var c=r;i.length;){c=c[u=i.pop()]}return c}function tt(t){var n=t&&t.__nerve__;return n&&"FieldSchema"===n.nerveObjectType}function nt(t){if(!tt(t))throw Error("Invalid parameter: please use '<your master [class]>.Schema.*' for the parameter.");return!0}function rt(t){return nt(t),t.__nerve__.info}function it(t){return rt(t).FieldId}function et(t){return rt(t).Name}function ut(t){return rt(t).Path}function ct(t){return dt[t]}function ot(t,n){if(p(n)){if(n.__nerve__.asEnum){var r=n.__nerve__.enumType;if(r&&"string"==typeof t&&t in r)return r[t]}return t}if(L(n))return Object(s.g)(t).map((function(t){return ot(t,n[0])}));if(t){var i={},e=n.__nerve__.sourceNameToClientName;return Object.keys(t).forEach((function(r){if(r in e){var u=e[r],c=n[u];i[u]=ot(t[r],c)}})),i}return null}function st(t,n){if(p(n)){if(n.__nerve__.asEnum){var r=n.__nerve__.enumType;if(r&&"number"==typeof t&&t in r)return r[t]}return t}if(L(n))return Object(s.g)(t).map((function(t){return st(t,n[0])}));if(t){var i={};return Object.keys(n).forEach((function(r){if(r in t){var e=n[r];if(!e.__nerve__.info.Attributes.IsLocalField){var u=e.__nerve__.sourceName;i[u]=st(t[r],e)}}})),i}return null}function ft(t,n){if(p(n))return t;if(L(n))return Object(s.g)(t).map((function(t){return ft(t,n[0])}));if(t){var r={},i=n.__nerve__.sourceNameToClientName;return Object.keys(t).forEach((function(e){if(e in i){var u=n[i[e]];r[e]=ft(t[e],u)}})),r}return null}function at(t,n){var r=t.__nerve__.masterName,e={enumTypeGetter:null,getKeyForReferenceType:null,info:{Attributes:Object(y.b)(n),FieldId:lt(),IsCollection:!(!Object(y.c)(n)||!n.__nerve__.isCollection),IsLeaf:!1,Name:r,Path:r},parentMasterClass:t,shadowParent:null,withDataSource:!!t.__nerve__.dataSourceFactory};e.info.IsCollection&&Object(s.i)(e,"withDataSource",(function(){return u[0].__nerve__.withDataSource}));var u=ht(e);return Object.keys(n).forEach((function(r){Object(s.i)(u,r,function(t,n,r){var e=lt();return function(){var u,o=vt(t.__nerve__.masterName,n);if(Object(y.c)(r)){if(r.__nerve__.isLeaf)return S(e,t,r,n,o);r.__nerve__.isCollection?u=function(t,n){var r=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(i.c)(n,t);var r=n.prototype;return Object.defineProperty(n,"Schema",{get:function(){return n.__nerve__.schema},enumerable:!0,configurable:!0}),Object.defineProperty(r,"Schema",{get:function(){return n.__nerve__.schema},enumerable:!0,configurable:!0}),n}(U);return Object(c.b)(r,Object(s.e)({nerveObjectType:"collection master",masterName:t}),!0),r.__nerve__.schema=at(r,n),Object(s.n)(r.__nerve__,"schema"),r}(o,r):r.__nerve__.masterClassGetter&&(u=r.__nerve__.masterClassGetter())}u||(u=q(o,r));var f=Object(y.b)(r);return z(e,t,u,n,o,f)}}(t,r,n[r]))})),u}function ht(t){var n={};return t.info=Object(s.e)(t.info),t.nerveObjectType="FieldSchema",t.shadowParent=t.shadowParent||null,t.shadowRoot=t.shadowRoot||n,Object(s.i)(t,"sourceFieldSet",(function(){var n=t.subFields.toArray().filter((function(t){return!t.__nerve__.info.Attributes.IsLocalField}));return new u(n)})),Object(s.i)(t,"sourceName",(function(){return t.info.Attributes.SourceFieldName||t.info.Name})),Object(s.i)(t,"sourceNameToClientName",(function(){var n={};return t.sourceFieldSet.toArray().forEach((function(t){n[t.__nerve__.sourceName]=t.__nerve__.info.Name})),Object.freeze(n)})),Object(s.i)(t,"subFields",(function(){var t=new u;return Object.keys(n).forEach((function(r){t.addFieldSchema(n[r])})),t})),Object(s.i)(t,"allContainedFields",(function(){var t=new u([n]);return Object.keys(n).forEach((function(r){var i=n[r];t.addFieldSchemas(i.__nerve__.allContainedFields)})),t})),Object(s.i)(t,"asEnum",(function(){return!!t.enumType&&!t.info.Attributes.IsNumberTypeInDataSource})),Object(s.i)(t,"enumType",(function(){return t.enumTypeGetter&&t.enumTypeGetter()})),t.info.IsLeaf?Object(s.i)(t,"getKey",(function(){return Object(e.a)(t.getKeyForReferenceType,"getKey has been called but no keyGetter specified for "+t.info.Path),t.getKeyForReferenceType})):Object(s.i)(t,"getKey",(function(){var n=t.keyFields.toArray().map(et).sort();return Object(e.a)(n.length>0,"getKey has been called but there's no key fields of "+t.info.Path),function(t){var r=n;if(t instanceof J){var i=t.__nerve__.master;if(W(i)){var e=i;if(!(r=n.filter((function(t){return e.isFieldReady(t)}))).length)return}}var u={};return r.forEach((function(n){return u[n]=t[n]})),JSON.stringify(u)}})),Object(s.i)(t,"getKeyFromSourceData",(function(){var n=t.keyFields.toArray(),r=t.sourceNameToClientName,i=n.map((function(t){return t.__nerve__.sourceName}));return function(n){var e={};return i.forEach((function(t){var i=r[t];e[i]=n[t]})),t.getKey(e)}})),Object(s.i)(t,"keyFields",(function(){return new u(t.subFields.toArray().filter((function(t){return t.__nerve__.info.Attributes.IsKeyField})))})),t.info.IsLeaf?Object(s.i)(t,"withKey",(function(){return!!t.getKeyForReferenceType})):Object(s.i)(t,"withKey",(function(){return t.keyFields.Count>0})),Object(c.b)(n,t),Object(s.h)(n,"toJSON",(function(){return"[Nerve] FieldSchema: ("+t.info.Path+")>"}),!1),t.info.IsCollection&&Object(s.h)(n,"length",1,!1),dt[t.info.FieldId]=n,n}function vt(t,n){return t+"/"+n}function lt(){return(bt++).toString()}var bt=1,dt={},Ot=function(t){function n(){var n=t.call(this,{InitialData:{InProcess:!1,AllSucceeded:!0,Scheduled:!1,CreationError:null,CreationFailed:!1,CreationInProcess:!1,CreationRetryScheduled:!1,CreationScheduled:!1,QueryError:null,QueryFailed:!1,QueryInProcess:!1,UpdateError:null,UpdateFailed:!1,UpdateInProcess:!1,UpdateRetryScheduled:!1,UpdateScheduled:!1}})||this;return n.addRule(jt),n.addRule(mt),n.addRule(gt),n}return Object(i.c)(n,t),n}(q("Nerve.ObjectSynchronizerMaster",{InProcess:y.a.boolean(),AllSucceeded:y.a.boolean(),Scheduled:y.a.boolean(),CreationError:y.a.reference(),CreationFailed:y.a.boolean(),CreationInProcess:y.a.boolean(),CreationScheduled:y.a.boolean(),CreationRetryScheduled:y.a.boolean(),QueryError:y.a.reference(),QueryFailed:y.a.boolean(),QueryInProcess:y.a.boolean(),UpdateError:y.a.reference(),UpdateFailed:y.a.boolean(),UpdateInProcess:y.a.boolean(),UpdateRetryScheduled:y.a.boolean(),UpdateScheduled:y.a.boolean()})),jt={Name:"InProcess",InterestedFields:[Ot.Schema.CreationInProcess,Ot.Schema.QueryInProcess,Ot.Schema.UpdateInProcess],onChange:function(t){var n=t.Master.Model;n.InProcess=n.CreationInProcess||n.QueryInProcess||n.UpdateInProcess}},mt={Name:"AllSucceeded",InterestedFields:[Ot.Schema.CreationFailed,Ot.Schema.QueryFailed,Ot.Schema.UpdateFailed],onChange:function(t){var n=t.Master.Model;n.AllSucceeded=!(n.CreationFailed||n.QueryFailed||n.UpdateFailed)}},gt={Name:"Scheduled",InterestedFields:[Ot.Schema.CreationScheduled,Ot.Schema.CreationRetryScheduled,Ot.Schema.UpdateScheduled,Ot.Schema.UpdateRetryScheduled],onChange:function(t){var n=t.Master.Model;n.Scheduled=n.CreationScheduled||n.CreationRetryScheduled||n.UpdateScheduled||n.UpdateRetryScheduled}},yt=function(){function t(t){t?(this.Tt=new pt({retry:t.retryForCreation&&t.retryForCreation.bind(t),cancel:t.cancelRetryForCreation&&t.cancelRetryForCreation.bind(t)}),this.kt=new pt({retry:t.retryForUpdate&&t.retryForUpdate.bind(t),cancel:t.cancelRetryForUpdate&&t.cancelRetryForUpdate.bind(t)})):(this.Tt=new pt,this.kt=new pt),this.Et=t||{}}var n=t.prototype;return n.scheduleUpdate=function(){return this.At?(this.Et.postponeUpdate&&this.Et.postponeUpdate(),this.At.promise()):this.Kt()},n.postponeUpdate=function(){this.Et.postponeUpdate&&this.Et.postponeUpdate()},n.flush=function(){if(this.Tt.flush(),this.kt.flush(),this.Rt&&(this.Rt.cancel(),this.Rt=void 0,this.Et.cancelUpdate&&this.Et.cancelUpdate()),this.At){var t=this.At;this.At=void 0,t.resolve()}},n.cancelUpdate=function(){this.At&&(this.At.reject(),this.Et.cancelUpdate&&this.Et.cancelUpdate())},n.retryForCreation=function(t){return this.Tt.retry(t)},n.cancelRetryForCreation=function(){return this.Tt.cancel()},n.retryForUpdate=function(t){return this.kt.retry(t)},n.cancelRetryForUpdate=function(){return this.kt.cancel()},n.Kt=function(){var t=this;this.At||(this.At=$.Deferred());var n,r=this.At;return n=this.Et.scheduleUpdate?this.Et.scheduleUpdate():Object(s.m)(),this.Rt=new s.b(n),this.Rt.promise().always((function(){t.At=void 0,t.Rt=void 0})).done((function(){return r.resolve()})).fail((function(){return r.reject()})),r.promise()},t}(),pt=function(){function t(t){this.Et=t||{}}var n=t.prototype;return n.retry=function(t){var n=this;if(!this.Et.retry)return Object(s.l)();this.cancel();var r=$.Deferred();return this.Gt=r,this.Ut=new s.b(this.Et.retry(t)),this.Ut.promise().always((function(){n.Gt=void 0,n.Ut=void 0})).done((function(){return r.resolve()})).fail((function(){return r.reject()})),r.promise()},n.flush=function(){if(this.Ut&&(this.Ut.cancel(),this.Ut=void 0,this.Et.cancel&&this.Et.cancel()),this.Gt){var t=this.Gt;this.Gt=void 0,t.resolve()}},n.cancel=function(){this.Ut&&(this.Ut.cancel(),this.Gt=void 0,this.Ut=void 0,this.Et.cancel&&this.Et.cancel())},t}(),St=function(t){function n(n,r,i,e,u){var c=t.call(this)||this;c.xt=$.Deferred(),c.Lt=$.Deferred(),c.zt={},c.Qt={},c.Vt={},c._t=$.Deferred().resolve().promise(),c.Bt=0,c.Jt=[],c.M=n,c.Et=new yt(i.Scheduler),c.Wt();var o=r.Reserved&&r.Reserved.ParentExistingInDataSource;c.qt=$.when(r.MasterTreeReady,e,o).then((function(){return u(n,(function(t){return c.onSourceDataReceived(t)}),i.DataSourceContext)}));var s=c.Ht(r);if(s.length){var f=$.Deferred().resolve();s.forEach((function(t){c.zt[t]=!0,c.Qt[t]=f}))}return e.done((function(){n.observe((function(t){t.UpdateNeeded&&c.Xt()}))})),!r.ExistingInDataSource?c.Yt():(c.Zt=e,c.Zt.done((function(){return c.Xt()}))),c}Object(i.c)(n,t);var r=n.prototype;return r.flush=function(){var t=this;return this.Et.flush(),this.Zt.then((function(){return t.Lt}))},r.existingInDataSource=function(){return this.Zt},r.deletedFromDataSource=function(){var t=this;return this.Zt.then((function(){return t.xt.promise()}),(function(){return Object(s.m)()}))},r.isFieldReady=function(t){t=this.M.getRelatedSourceFields([t])[0];var n=et(Y(this.M,[t])[0]);return!!this.zt[n]},r.ensureFieldsReady=function(t){var n=this;t=this.M.getRelatedSourceFields(t);var r=Y(this.M,t);return r.filter((function(t){return!n.isFieldReady(t)})).length?this.Zt.then((function(){var t=r.filter((function(t){return!n.isFieldReady(t)}));return t.length?n.query(t):Object(s.m)()})).then((function(){return n.tn()})):Object(s.m)()},r.forceFieldsReady=function(t){var n=this;t=this.M.getRelatedSourceFields(t),Y(this.M,t).filter((function(t){return!n.isFieldReady(t)})).forEach((function(t){n.zt[et(t)]=!0}))},r.fieldsReady=function(t){var n=this;t=this.M.getRelatedSourceFields(t);var r=Y(this.M,t).map(et).map((function(t){return n.Qt[t]||(n.Qt[t]=$.Deferred()),n.Qt[t].promise()}));return $.when.apply($,r).then((function(){return n.tn()}))},r.query=function(t){var n=this;t=this.M.getRelatedSourceFields(t);var r=Y(this.M,t);return this.Zt.then((function(){var t=[],i=$.Deferred(),e=i.then((function(){return n.nn(t)})),u=[];return r.filter((function(t){return!t.__nerve__.info.Attributes.IsLocalField})).forEach((function(r){var i=et(r),c=n.Vt[i];c&&"pending"===c.state()||(n.Vt[i]=e,t.push(r.__nerve__.sourceName)),u.push(n.Vt[i])})),t.length?i.resolve():i.reject(),$.when.apply($,u)})).then((function(){return n.tn()}))},r.onSourceDataReceived=function(t){var n=this,r=ft(t,this.M.Schema);return this.Jt.push(r),this._t.then((function(){return n.rn()}))},r.onDeletedInDataSource=function(){this.in().ExistingInSource=!1,this.M.Deleted=!0},r.setFieldsQueryJob=function(t,n){var r=this,i=Y(this.M,this.M.getRelatedSourceFields(t)).filter((function(t){return!t.__nerve__.info.Attributes.IsLocalField})),e=$.Deferred(),u=e.then((function(){return n})).then((function(t){var n={};return i.map((function(t){return t.__nerve__.sourceName})).forEach((function(r){return n[r]=t[r]})),r.onSourceDataReceived(n)}));i.map(et).forEach((function(t){var n=r.Vt[t];n&&"pending"===n.state()?r.Vt[t]=Object(s.d)(n,u):r.Vt[t]=u})),e.resolve()},r.markFieldsAsReady=function(t,n){var r=this;t.forEach((function(t){return r.zt[t]=!0})),n.done((function(){var n=$.Deferred().resolve();t.forEach((function(t){r.Qt[t]?r.Qt[t].resolve():r.Qt[t]=n}))}))},r.Wt=function(){var t=this;this.Lt=$.Deferred().resolve(),this.observe((function(){return t.en()}),[this.Schema.UpdateError,this.Schema.UpdateFailed,this.Schema.UpdateInProcess,this.Schema.UpdateScheduled])},r.en=function(){var t=this.Model;t.UpdateScheduled||t.UpdateInProcess?"pending"!==this.Lt.state()&&(this.Lt=$.Deferred()):t.UpdateFailed?t.UpdateRetryScheduled||this.Lt.reject(t.UpdateError):this.Lt.resolve()},r.Ht=function(t){var n=this.M.Schema.__nerve__.subFields;if(t.ExistingInDataSource){var r=t.InitialData||{},i=[];return n.toArray().forEach((function(t){var n=et(t);(t.__nerve__.info.Attributes.IsLocalField||n in r)&&i.push(n)})),i}return n.toArray().filter((function(t){return!t.__nerve__.info.Attributes.IsSourceGenerated})).map(et)},r.Xt=function(){var t=this;this.in().isDirty()?this.bulkEdit((function(){t.Model.UpdateScheduled=!0,$.when(t.Zt,t.Et.scheduleUpdate()).done((function(){t.Bt=0,t.un()}))})):(this.Et.cancelUpdate(),this.Model.UpdateScheduled=!1)},r.un=function(){if(this.cn)this.on=!0;else if(this.in().isDirty()){if(this.sn(),this.in().isDirty())return this.M.__nerve__.deleted?this.fn():this.an();Object(e.e)("onUpdateStart changes dirtiness."),this.hn()}else this.hn()},r.in=function(){return this.M.__nerve__.dirtyChecker},r.Yt=function(){var t=this,n=$.Deferred();this.Zt=n.promise();var r=this.M;this.bulkEdit((function(){t.Model.CreationScheduled=!0,t.qt.done((function(i){var e=function(){if(t.Et.cancelRetryForCreation(),r.__nerve__.deleted)return t.bulkEdit((function(){t.Model.CreationFailed=!1,t.Model.CreationInProcess=!1,t.Model.CreationRetryScheduled=!1,t.Model.CreationScheduled=!1}));t.bulkEdit((function(){t.Model.CreationError=null,t.Model.CreationFailed=!1,t.Model.CreationInProcess=!0,t.Model.CreationRetryScheduled=!1,t.Model.CreationScheduled=!1}));var c=t.in(),o=c.getDelta()||{},s=c.getSnapshotToUpdate(),f=t._t.then((function(){return i.add(o,{Master:r,Snapshot:s})})).then((function(i){r.bulkEdit((function(){c.ExistingInSource=!0,c.setSourceData(o),i&&t.vn(i)})),t.bulkEdit((function(){t.Model.CreationInProcess=!1,t.Xt()})),n.resolve()})).fail((function(r){t.bulkEdit((function(){t.Model.CreationFailed=!0,t.Model.CreationError=r,t.Model.CreationInProcess=!1,t.Model.CreationRetryScheduled=!0,t.Et.retryForCreation(++u).done(e).fail((function(){t.Model.CreationRetryScheduled=!1,n.reject(r)}))}))}));t.ln(f)},u=0;e()}))}))},r.fn=function(){var t=this,n=this.in(),r=this._t.then((function(){return t.qt})).then((function(r){var i=n.getSnapshotToUpdate();return r.delete(i,{Master:t.M,Snapshot:i})})).then((function(){return n.ExistingInSource=!1}));return this.ln(r),r.done((function(){t.hn(!1),t.xt.resolve()})).fail((function(n){t.bn(n,!1,(function(){t.xt.reject(n)}))}))},r.nn=function(t){var n=this,r=this._t.then((function(){return n.qt})).then((function(r){return n.bulkEdit((function(){n.Model.QueryError=null,n.Model.QueryInProcess=!0})),r.query(t,{Master:n.M,Snapshot:null})})).then((function(r){if(r){var i={};Object.keys(r).concat(t).forEach((function(t){return i[t]=r[t]})),n.vn(i)}}));return this.ln(r),r.done((function(){n.Model.QueryInProcess=!1})).fail((function(t){n.bulkEdit((function(){n.Model.QueryError=t,n.Model.QueryInProcess=!1}))}))},r.an=function(){var t=this,n=this.in(),r=n.getDelta(),i=n.getSnapshotToUpdate(),u=n.getSourceData();null==r&&Object(e.e)("data is null when it's dirty.");var c=this._t.then((function(){return t.qt})).then((function(n){return n.update(r,{Master:t.M,Snapshot:i,ValuesBefore:u})})).then((function(i){t.M.bulkEdit((function(){n.setSourceData(r),i&&t.vn(i)}))}));return this.ln(c),c.done((function(){return t.hn(!0)})).fail((function(n){return t.bn(n,!0)}))},r.sn=function(){var t=this;this.cn=!0,this.on=!1,this.Et.cancelRetryForUpdate(),this.bulkEdit((function(){t.Model.UpdateError=null,t.Model.UpdateFailed=!1,t.Model.UpdateInProcess=!0,t.Model.UpdateRetryScheduled=!1,t.Model.UpdateScheduled=!1}))},r.hn=function(t){var n=this;this.cn=!1,this.Bt=0,this.Et.cancelRetryForUpdate(),this.bulkEdit((function(){n.Model.UpdateError=null,n.Model.UpdateFailed=!1,n.Model.UpdateInProcess=!1,n.Model.UpdateRetryScheduled=!1,n.Model.UpdateScheduled=!1,t&&(n.on?n.un():n.Xt())}))},r.bn=function(t,n,r){var i=this;this.in().isDirty()?(this.cn=!1,this.bulkEdit((function(){i.Model.UpdateError=t,i.Model.UpdateFailed=!0,i.Model.UpdateInProcess=!1,i.Model.UpdateRetryScheduled=!0,i.Model.UpdateScheduled=!0,n&&i.on?i.un():i.Et.retryForUpdate(++i.Bt).done((function(){return i.un()})).fail((function(){i.bulkEdit((function(){i.Model.UpdateRetryScheduled=!1,i.Model.UpdateScheduled=!1})),r&&r()}))}))):this.hn()},r.vn=function(t){var n=ft(t,this.M.Schema);this.in().onSourceDataReceived(n)},r.ln=function(t){var n=this;this._t=Object(s.c)(t).then((function(){return n.rn()}))},r.rn=function(){var t=this.in(),n=this.Jt;this.Jt=[],this.M.bulkEdit((function(){n.forEach((function(n){return t.onSourceDataReceived(n)}))}))},r.tn=function(){return this.M.__nerve__.changeManager.getChangingPeriod()},n}(Ot);V.ObjectSynchronizer=St,r.d(n,"a",(function(){return wt}));var wt=function(){function t(){}t.prototype;return t.getSubFieldSchemas=function(t){return function(t){return nt(t),t.__nerve__.subFields.toArray()}(t)},t.convertFromSourceData=function(t,n){return ot(t,n)},t.convertToSourceData=function(t,n){return st(t,n)},t.convertToArray=function(t){return Object(s.g)(t)},t.getFieldSchemaInfo=function(t){return rt(t)},t.getObjectMasterFromModel=function(t){return f(t)},t.getCollectionMasterFromModel=function(t){return f(t)},t.createObjectMasterClass=function(t,n,r){return q(t,n,r)},t.isObjectMasterClass=function(t){return function(t){var n=t;return!!n.__nerve__&&"object master"===n.__nerve__.nerveObjectType}(t)},t}();Object(s.n)(wt,"convertToArray"),Object(s.n)(wt,"getFieldSchemaInfo"),Object(s.n)(wt,"getSubFieldSchemas"),Object(s.n)(wt,"convertFromSourceData"),Object(s.n)(wt,"convertToSourceData"),Object(s.n)(wt,"createObjectMasterClass"),Object(s.n)(wt,"getObjectMasterFromModel"),Object(s.n)(wt,"getCollectionMasterFromModel"),Object(s.n)(wt,"isObjectMasterClass");var It={addItems:null,deleteItems:null,getIndexWithKeyFields:null,getItemWithKeyFields:null,itemsAddedInSource:null,itemsDeletedInSource:null,markAsChanged:null,setComparer:null};for(var Ft in It)It[Ft]=Ct(Ft);function Ct(t){return function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var e=wt.getCollectionMasterFromModel(n),u=e[t];return u.apply(e,r)}}wt.Collection=Object.freeze(It),Object(s.n)(wt,"Collection")},59:function(t,n,r){"use strict";r.d(n,"a",(function(){return e})),r.d(n,"b",(function(){return u}));var i=r(13),e=function(t){void 0===t&&(t={}),u(this,t)};function u(t,n,r){void 0===r&&(r=!1),Object(i.h)(t,"__nerve__",n,r)}}}]);